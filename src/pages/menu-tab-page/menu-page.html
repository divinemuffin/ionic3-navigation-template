<ion-header>

  <ion-navbar>
    <ion-title>Menu</ion-title>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-list>
    <ion-list-header *ngIf="username">
      {{username}}
    </ion-list-header>

    <div *ngFor="let page of pages" class="menu-item">
      <button ion-item icon-start detail-none (click)="openPage(page)">
        <ion-icon *ngIf="page.icon" name="{{page.icon}}" item-left></ion-icon>
          {{page.title}}
        <ion-icon [name]="page.opened === true ? 'ios-arrow-down' : 'ios-arrow-forward'" *ngIf="page.subItems" item-right></ion-icon>
        <ion-badge item-end *ngIf="page.title === 'Notifications' && unreadMessages > 0" color="primary">{{unreadMessages}}</ion-badge>
      </button>

      <!-- Child Pages  -->
      <button ion-item (click)="openPage(subpage, $event)" menuClose [hidden]="!page.opened"
      *ngFor="let subpage of page.subItems" class="menu-subitem" no-lines detail-none>
        {{subpage.title}}
      </button>
    </div>
    <button ion-item icon-start detail-none no-lines class="menu-item" (click)='openPage({ title: "Choose categories", component: "FavoriteCategoriesPage"})'>
      <ion-icon name="add-circle-outline" item-left></ion-icon>
        Choose featured categories
      <ion-icon item-right></ion-icon>
    </button>

  </ion-list>
</ion-content>
